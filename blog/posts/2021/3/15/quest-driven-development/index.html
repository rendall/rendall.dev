<!doctype html>
<html lang="en" class="web-font">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Quest Driven Development</title>
	<link rel="stylesheet" href="/css/styles.css">
	<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Rendall&#39;s blog">
</head>

<body class="Blog">
	<header class="Blog__Header">
		<h1 class="Blog__Title"><a href="/">Rendall&#39;s blog</a></h1>
	</header>

	<main class="Blog__Post" >
		<header class="Post__Header">
  <h2 class="Post__Title">Quest Driven Development</h2><time class="Post__Date" datetime="2021-03-15">2021-03-15</time>
  
  <a href="/tags/ideas/" class="tag">ideas</a>
  <a href="/tags/tech/" class="tag">tech</a>
  <a href="/tags/QDD/" class="tag">QDD</a>
</header>

<article class="Post__Article">
  <p><em>Quest Driven Development</em> is an expressive approach to writing game stories and interactive fiction that leaves coding and implementation to software, so writers can focus on narrative and world-building. This approach can highlight inconsistencies or problems as potentially clashing narrative branches are woven together, allowing a writer to correct errors or inconsistencies as they go.</p>
<p>Currently <em>Quest Driven Development (QDD)</em> is in the concept phase, but the problem and solution space is generally well understood. This post is a brief overview of its ideas.</p>
<p>The approach itself and infrastructure tooling is <a href="https://github.com/rendall/quest-driven-development">open-source</a> (nothing hidden, and you can contribute) under the <a href="https://github.com/rendall/quest-driven-development/blob/master/LICENSE">standard MIT License</a> (use it however you want, commercially or not, heck launch a business with it), and uses the <a href="https://allcontributors.org/docs/en/overview">all-contributors specification</a>, which honors every contributor and contribution, both technical and non-technical.</p>
<h2 id="introduction">Introduction <a class="direct-link" href="#introduction">#</a></h2>
<p>Story-rich games, interactive fiction, branching narratives of all sorts, including even bog-standard fetch quests, all have the same underlying abstract structure. Leveraging principles from theory and practice in other areas of software development can improve the design, writing and programming of branching narratives.</p>
<p>A branching narrative creator can, using <em>Quest Driven Development</em>, focus on the over-arching story, narrowing in on story details as needed, all while leaving actual implementation details such as variable values, error checks and if-then conditionals to software infrastructure and tooling.</p>
<p>When mature, this approach allows:</p>
<ul>
<li>automatically testing the narrative structure for errors and incompletable states;</li>
<li>tracking narrative events and their consequences in world-building;</li>
<li>visualizing the narrative structure as a whole or in part;</li>
<li>interactively navigating and &quot;getting a feel for&quot; the narrative structure without needing to encode changes into the game platform;</li>
<li>automatic code generation using the narrative itself as a template, rather than programming the narrative by hand;</li>
<li>enable porting of game narratives into different platforms;</li>
<li>data-gathering about the popularity and difficulty of various narrative structures.</li>
</ul>
<p>As time goes on and the approach matures even further, it should be possible to procedurally generate coherent, unique branching narrative structures, for nearly infinite narratives.</p>
<p>Given the similar structures that quests share with well-understood problems in software development, current best practices and solutions to these problems can be leveraged to handle or even solve them.</p>
<h3 id="brief-taxonomy-of-interactive-narrative-structures">Brief Taxonomy of Interactive Narrative Structures <a class="direct-link" href="#brief-taxonomy-of-interactive-narrative-structures">#</a></h3>
<p>If you're familiar with interactive and branching narratives, feel free to skip ahead!</p>
<p><em>Branching Narrative</em> is a general term for the class of stories in which player actions can decide how a story proceeds. <a href="https://en.wikipedia.org/wiki/Black_Mirror%3A_Bandersnatch">Black Mirror: Bandersnatch</a> is one example of this story as applied to film. <a href="https://en.wikipedia.org/wiki/Life_Is_Strange">Life Is Strange</a> is an example applied to the medium of video games. <a href="https://en.wikipedia.org/wiki/Dictionary_of_the_Khazars">Dictionary of the Khazars</a> is (arguably) an example of branching narrative applied to the traditional book medium.</p>
<p><em>Interactive</em> here means that the story somehow reacts to the player. (And <em>player</em> here means the viewer or reader or player, irrespective of the medium.)</p>
<h4 id="linear-narrative">Linear Narrative <a class="direct-link" href="#linear-narrative">#</a></h4>
<p>Stories throughout history have overwhelmingly been <em>linear</em>, in which the story begins and proceeds inevitably to its conclusion, <em>Once upon a time...</em> to <em>...happily ever after</em>.</p>
<p>Often <em>linear narrative</em> is contrasted with <em>interactive narrative</em>, but sometimes a narrative can be <em>interactive</em> but nevertheless <em>linear</em>: there are no branching states irrespective of the player's actions. While usually considered to be a flaw, it sometimes can be an effective story-telling device. One example is the interactive fiction <a href="https://en.wikipedia.org/wiki/Photopia">Photopia</a>.</p>
<h4 id="quests">Quests <a class="direct-link" href="#quests">#</a></h4>
<p>A <em>quest</em> is a goal-oriented subset of the general <em>branching narrative</em>, in which generally a character succeeds at a task and is rewarded or fails and is not. As a minor point, <em>Quest Driven Development</em> itself can apply to any style of branching narrative, not only quests. <em>Quest Driven Development</em> is however a snappier name than <em>Branching Narrative Driven Development</em></p>
<h4 id="choose-your-own-adventure">Choose Your Own Adventure <a class="direct-link" href="#choose-your-own-adventure">#</a></h4>
<p><em>Choose Your Own Adventure (CYOA)</em> is a subset of <em>branching narrative</em> in which a player's input is limited to a specific and explicit set of choices, e.g. <em>&quot;To enter the cave, turn to page 25. To cross the river on the log, turn to page 42&quot;</em>. The actions that exit the current narrative state are clearly listed as a multiple choice. While <em>Quest Driven Development</em> can handle this style of narrative, it is not restricted to that.</p>
<p>As an aside, though, I might argue that <em>nearly all</em> branching narratives ultimately resolve to this kind of structure. In most game platforms, the player has a wide variety of verbs and actions available all the time, but only a small subset of these actions at the right point will move the <em>narrative</em> along. These actions that exit state are most often <em>hidden or obscured from the player</em>, and part of the challenge is to discern clues in the environment that indicate these transitional actions. The above <em>CYOA</em> example for instance might have in an Interactive Fiction platform only this description: <em>&quot;You are in a forest. To the north is a cave. A river flows nearby, across which lays a log.&quot;</em> The player is invited to examine elements of the environment to decide what actions will move the narrative ahead.</p>
<h2 id="theory">Theory <a class="direct-link" href="#theory">#</a></h2>
<p>Quests and branching narratives in general correspond to some well-understood mathematical constructs in mathematics and computer science. If this does not interest you in the least, feel free to skip down to the <a href="#practice">Practice</a> section below.</p>
<h3 id="finite-state-machines-and-statecharts">Finite state machines and Statecharts <a class="direct-link" href="#finite-state-machines-and-statecharts">#</a></h3>
<p>A <a href="https://en.wikipedia.org/wiki/Finite-state_machine">finite state machine (FSM)</a> is an idea from computer science, an abstract machine which has a specific number of <em>states</em>. A <a href="https://en.wikipedia.org/wiki/State_(computer_science)#Program_state"><em>state</em></a> can here entirely describe the player's position along a narrative arc as the result of any past decisions or actions. Some of the possible decisions at a given state will <em>transition</em> the narrative arc from the current state to another state. In this way, a quest can be described as a finite state machine (or, rather, this essay applies only to those interactive narratives that fit the structure of a finite state machine). A <em>terminal state</em> for our purposes is a state that ends, or narratively concludes, the quest.</p>
<p>The <a href="https://statecharts.github.io/">statechart</a> modifies the concept of finite state machines to more easily apply to real-world solutions, to allow for hierarchical structures and state machines that coordinate in parallel. This could allow for the FSM that represents the narrative structure to overlay another FSM that represents locations in the game, for example.</p>
<h3 id="graph-theory">Graph theory <a class="direct-link" href="#graph-theory">#</a></h3>
<p>A finite state machine, and therefore a quest, can be described as a directed graph, where <em>nodes</em> of the graph are <em>states</em>, and <em>edges</em> of the graph are specific actions or decisions which transition the quest from one state to the next. This is wonderful news, because graphs, finite state machines, and therefore quests, have available an intuitive visualization and a rich knowledge base for reasoning about them.</p>
<h3 id="regular-expressions">Regular expressions <a class="direct-link" href="#regular-expressions">#</a></h3>
<p>A finite state machine can be entirely described by a regular expression. This is a minor point that may not be useful for <em>writing</em> quests, but may be useful for <em>testing</em> quests. What this would mean in practice is that a regular expression engine could be leveraged to test whether any given sequence of actions would lead to an ending (or <em>terminal state</em>).</p>
<h2 id="practice">Practice <a class="direct-link" href="#practice">#</a></h2>
<p>A <em>state</em> as described above can roughly correspond to a scene in a play or an episode in a long-arc TV series: the scenario the characters find themselves in are due to the result of all previous decisions, and the <em>transition</em> corresponds to decisions or actions that move characters into new scenarios. A narrative constructed with this structure can leverage the theory outlined above <em>and</em> the practices outlined below.</p>
<h3 id="development-environment">Development environment <a class="direct-link" href="#development-environment">#</a></h3>
<p>As an <em>approach</em> rather than as a specific software solution, <em>Quest Driven Development</em> can accommodate all manner of writing styles and preferences.</p>
<p>In the abstract, a branching narrative writer will need an interface that outputs structured data objects which in turn are consumed by other software (perhaps directly by a game platform, or by a visualizer, or an interpreter). The actual nature of the development should be flexible enough to accommodate any sort of file format, from Word and text files, to spreadsheets, dynamic forms and widgets, to visual programming.</p>
<p>Practically, the structured data for a single scene of a larger narrative would look something like this:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">[</span> <span class="token punctuation">{</span><br>  name<span class="token operator">:</span> <span class="token string">"Stella reads the journal"</span><span class="token punctuation">,</span><br>  description<span class="token operator">:</span> "After Fisk's betrayal and the loss of her medallion<span class="token punctuation">,</span><br>  Stella in despair flips randomly through Grandma Pluck's journal.<br>  There<span class="token punctuation">,</span> she discovers how exactly the cult intends to summon the<br>  End of Times. But what does she do with this knowledge?"<span class="token punctuation">,</span><br>  actions<span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span>decision<span class="token operator">:</span><span class="token string">"tell-fisk"</span><span class="token punctuation">,</span> result<span class="token operator">:</span><span class="token string">"fisks-second-betrayal"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span>decision<span class="token operator">:</span><span class="token string">"do-nothing"</span><span class="token punctuation">,</span> result<span class="token operator">:</span><span class="token string">"eschaton-arrival"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span>decision<span class="token operator">:</span><span class="token string">"try-stop-cult"</span><span class="token punctuation">,</span> result<span class="token operator">:</span><span class="token string">"disturbing-revelations"</span><span class="token punctuation">}</span><br>  <span class="token punctuation">]</span><br>  ...<br><span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">{</span><br>  name<span class="token operator">:</span> <span class="token string">"Stella does nothing"</span><span class="token punctuation">,</span><br>  description<span class="token operator">:</span> "Succumbing at last to exhaustion and fear<span class="token punctuation">,</span> Stella<br>  lays under her fluffy down comforter and curls into a ball<span class="token punctuation">,</span><br>  rocking herself to sleep. The Final Battle is decisive. Entropy's<br>  victory has always been inevitable<span class="token punctuation">,</span> and now is its time.<br>  Unleashed at last<span class="token punctuation">,</span> Fenris<span class="token punctuation">,</span> the Howling Wolf Always Hungry<span class="token punctuation">,</span><br>  devours the Sun<span class="token punctuation">,</span> the Moon<span class="token punctuation">,</span> the Stars<span class="token punctuation">,</span> Stella<span class="token punctuation">,</span> Fisk<span class="token punctuation">,</span> the cult<span class="token punctuation">,</span> the<br>  Earth<span class="token punctuation">,</span> Time<span class="token punctuation">,</span> and finally<span class="token punctuation">,</span> itself. Nothing remains<span class="token punctuation">,</span> but deep cold<br>  and darkness<span class="token punctuation">,</span> for eternity"<span class="token punctuation">,</span><br>  actions<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><br><span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre>
<p>Software can consume and use such objects to map out the narrative structure, test it and even transform it into cold, hard code.</p>
<h3 id="state-management">State management <a class="direct-link" href="#state-management">#</a></h3>
<p>The consequences of potential decisions can overlap and interfere with each other. In a large game, a narrative can become inconsistent: a decision made by the player may not be reflected in the game state later, and almost never in conversation with a minor character at any point. Worse, certain quests or the game itself may <a href="https://duckduckgo.com/?q=quest+incompletable&amp;ia=web">enter into an incompletable state</a>, infuriating and disappointing players.</p>
<p>Under the hood, a state is a collection of variables and their values, and a transition is a change to the value of one or more of these variables. Manipulating values directly is to transition unpredictably in an unmapped, unexplored state machine. Keeping track of all of these values so that they behave in an expected and consistent way is called <em>state management</em>, and there are approaches to do this.</p>
<p>In <em>Quest Driven Development</em>, the writer is encouraged to think of state not as a collection of variable-values, but as a branching-point in an narrative. Transitions are not to be thought of as changes to variables, but as possible actions by the player that advance the story.</p>
<h3 id="automated-testing">Automated testing <a class="direct-link" href="#automated-testing">#</a></h3>
<p>The internet is replete with plaintive posts from disappointed or infuriated players who cannot complete a quest or an entire game because of a broken quest. <em>Quest Driven Development</em> allows the narrative structure to be automatically explored and tested, flagging potential errors and inconsistencies. The narrative structure can be developed and tested in parallel and distinct from the underlying game platform.</p>
<h3 id="x-driven-development">X Driven Development <a class="direct-link" href="#x-driven-development">#</a></h3>
<p>Generally, <em>X</em> Driven Development (e.g. <em>Test Driven Development</em>, <em>Behavior Driven Development</em>, <em>Feature Driven Development</em>) are approaches to <em>software</em> development that emphasize the <em>X</em> part, usually by crafting the development environment so that the <em>X</em> can be written or developed first. In <em>Test</em> Driven Development, developers write tests that fail, and then write software so that the test will pass. Similarly, in <em>Behavior</em> Driven Development, development teams decide what behavior the software should have and write <em>expressive</em> synopses of this behavior.</p>
<p>The advantages of this approach is that the application has a series of automated tests that describe what the software should do, and importantly, can identify immediately when later additions to the software introduces bugs.</p>
<h4 id="quest-driven-development">Quest Driven Development <a class="direct-link" href="#quest-driven-development">#</a></h4>
<p>Likewise, <em>Quest Driven Development</em> emphasizes the stories that a game wants to tell. As the game progresses, a series of quest objects are created that can be continually tested against, to ensure that later additions are coherent, potential bugs or narrative consistencies are highlighted, and <a href="https://duckduckgo.com/?q=game+quest+incompletable&amp;ia=web">all quests are all completable</a>.</p>
<h2 id="hence">Hence <a class="direct-link" href="#hence">#</a></h2>
<p><em>Quest Driven Development</em> is a only an idea in its initial, conceptual phase. To be able to move beyond that into actually helping the community of story-driven game developers, I propose this list of future steps.</p>
<ul>
<li>Contributions: As a greenfield, interdisciplinary concept, the field is wide open for contributions.
<ul>
<li>Ideas for improvement</li>
<li>User-interface and developer experience</li>
<li>Helpful theory and resources</li>
<li>Game developers and writers who would consider using it:
<ul>
<li>What would you need to begin using the QDD approach?
<ul>
<li>Tooling?</li>
<li>Development environment?</li>
<li>Tutorial?</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Praxis: Culturally, the idea must be wedded and welded to actual development, not merely remain a theoretical idea
<ul>
<li>Pay particularly close attention to how game developers work, and interactive fiction writers write, and what they say</li>
</ul>
</li>
<li>Culture:
<ul>
<li>Friendly and open, to newbies and non-technical people in particular,</li>
<li>Honoring of all contributions from all contributors</li>
<li>As an untested idea, <em>QDD</em> very well may be an impractical dead end.
<ul>
<li>Advocates but not activists</li>
<li>Practice detachment from outcome</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>I have had this on my mind for a long time, and judging by some of the response, others have as well. Let's cooperate and bring some beauty to the world!</p>
<h3 id="roadmap">Roadmap <a class="direct-link" href="#roadmap">#</a></h3>
<ul>
<li>Blog posts that analyze and visualize in-the-wild branching-narratives</li>
<li>An <a href="https://en.wikipedia.org/wiki/Minimum_viable_product">MVP</a> that outputs a structured data file
<ul>
<li>Also accepts a file and populates its interface with the structured data</li>
</ul>
</li>
<li>Requests for comment, discussion and resources</li>
<li>Small games and quests, with input from active game developers</li>
<li>Tooling, such as JSON schema, testing frameworks, user interfaces</li>
<li>Automated code generation
<ul>
<li>Tools that transpile structured data to code</li>
<li>Unity plugin</li>
</ul>
</li>
<li>Procedural generation</li>
<li>This is undoubtedly a years-long project, so expectations of leisurely progress should be set accordingly</li>
</ul>
<h2 id="feedback">Feedback <a class="direct-link" href="#feedback">#</a></h2>
<p>If <em>Quest Driven Development</em> were a movie, this blog post is but a teaser trailer. If something here is unclear and you have a question, or it reminds you of work that you or someone else is doing, has done, wants to do, plans to do, or has ideas about, please do drop me a line and send a link to anyone else who might be interested!</p>
<ul>
<li>Create a <a href="https://github.com/rendall/quest-driven-development/issues/new">new issue</a> on the <a href="https://github.com/rendall/quest-driven-development">GitHub repo</a></li>
<li>Comment below on this blog post</li>
<li>Create a <a href="https://github.com/rendall/quest-driven-development/pulls">pull request</a> for code or documentation</li>
<li>Create or edit a page <a href="https://github.com/rendall/quest-driven-development/wiki">on the wiki</a></li>
<li>Others? Discord or Slack? <a href="https://github.com/rendall/quest-driven-development/issues/new">What do you think?</a></li>
</ul>
<h2 id="addenda">Addenda <a class="direct-link" href="#addenda">#</a></h2>
<p>These are questions and concerns that came up from helpful first draft readers or after publishing:</p>
<p><em>&quot;Is this a no-code way for non-coders to create games?&quot;</em></p>
<p>Not necessarily, but perhaps. It's more of an approach that enables creators to focus on narrative flow, getting out of the weeds of thinking in terms of variable values and more in terms of scenes and their transitions, the various ways the player can exit from those scenes. A side-effect of this approach should be more robust and error-free narratives, perhaps more complicated or sophisticated narrative structures, and perhaps an opening of the field to non-coders. But, it is by no means the only approach nor even the best approach for certain kinds of narrative or creative process.</p>
<p><em>&quot;The structured data code example above looks like it would list explicit actions, and the player then picks one. Isn't that a Choose Your Own Adventure?&quot;</em></p>
<p>In a word, no. Well, not necessarily. The primary focus of the <em>QDD</em> approach is on the <em>narrative</em> and not on its presentation. The decisions listed above are only those which will transition the narrative to the next state. While it may be atmospherically important for the action <em>&quot;look into the mirror&quot;</em> to have a response like <em>&quot;The boils have spread below your hairline. You look so tired, Stella. Maybe it would just be easier to give up?&quot;</em>, narratively speaking, that action does not drive the narrative itself forward (the next stages appear to be rather dark for poor Stella, judging by the state ids!).</p>
<p><em>&quot;How then would a writer encode 'atmospherics' using the QDD approach?&quot;</em></p>
<p>This is new to me, too, so I can't give a definite answer other than to say I know there is a good answer. One approach is to add something like this to the actions array, above:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"decision"</span><span class="token operator">:</span> <span class="token string">"look-mirror"</span><span class="token punctuation">,</span><br>  <span class="token property">"onTransition"</span><span class="token operator">:</span> <span class="token string">"You look so tired, Stella. Maybe it would be easier to just give up?"</span><span class="token punctuation">,</span><br>  <span class="token property">"result"</span><span class="token operator">:</span> <span class="token string">"loop-back"</span><br><span class="token punctuation">}</span></code></pre>
<p>Or maybe the platform itself has generic responses to actions that are not explicitly covered by the narrative-state-machine. Or such responses are set as context variables by specific states. I mention these as possibilities, but hopefully probably definitely alternative solutions will reveal themselves as this idea and tooling matures. Maybe you have a good idea?</p>
<h2 id="resources">Resources <a class="direct-link" href="#resources">#</a></h2>
<p>In no particular order, nor even guaranteed relevance:</p>
<p><a href="https://ptolemy.berkeley.edu/publications/papers/98/InteractionFSM/InteractionFSM.pdf">Interaction of Finite State Machines and Concurrency Models (pdf)</a><br>
<a href="http://blogs.ubc.ca/lled4492015/files/2015/07/Interactive-Visualizations-of-Plot-in-Fiction.pdf">Interactive Visualizations of Plot in Fiction (pdf)</a><br>
<a href="https://www.w3.org/TR/scxml/">SCXML specification</a><br>
<a href="https://statecharts.github.io/">Statecharts website</a><br>
<a href="https://www.sciencedirect.com/science/article/pii/0167642387900359?via%3Dihub">Statecharts: a visual formalism for complex systems</a><br>
<a href="https://github.com/davidkpiano/xstate">XState (state management and visualization library)</a></p>

</article>
<p><a href="/">‚Üê Home</a></p>

<link href="https://blog-rendall-dev-comments.netlify.app/css/simple-comment.css" rel="stylesheet" />
<p>Leave a comment on this post:</p>
<div id="simple-comment-area"></div>
<script type="module" src="https://blog-rendall-dev-comments.netlify.app/js/simple-comment.js"></script>


		</main>

		<footer></footer>

		<!-- Current page: /posts/2021/3/15/quest-driven-development/ -->
		<script src="/js/home.js"></script>
</body>

</html>